parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"hpvp":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=1e-8,u=function(){function e(n,i){t(this,e),this.x=n,this.y=i}return n(e,[{key:"length",value:function(){return Math.sqrt(this.length2())}},{key:"length2",value:function(){return this.x*this.x+this.y*this.y}},{key:"distance",value:function(t){return t.minus(this).length()}},{key:"distance2",value:function(t){return t.minus(this).length2()}},{key:"equals",value:function(t){return this.minus(t).length2()<i}},{key:"scalarMultiply",value:function(t){return new e(this.x*t,this.y*t)}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"minus",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"angle",value:function(t){return 180*Math.acos(this.dot(t)/(this.length()*t.length()))/Math.PI}},{key:"project",value:function(t){return t.scalarMultiply(this.dot(t)/t.length2())}},{key:"distanceToLine",value:function(t,e){var n=this.minus(t),i=e.minus(t),u=n.project(i),r=t.add(u),s=n.dot(i),a=s<0?-1:s>0?1:0;return{distance2:r.distance2(this),pointOnLine:r,lineProj2:a*u.length2(),length2:i.length2()}}}]),e}();exports.default=u;
},{}],"J7hg":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=function e(s,o,i){t(this,e),this.x=s,this.y=o,this.r=i/2};exports.default=e;
},{}],"7N8v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./Point.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}var o=function(){function e(t,n){r(this,e),this.edges=t,this.color=n}return a(e,[{key:"getCenter",value:function(e){var r=e.canvas.width,n=0,a=e.canvas.height,o=0,i=!0,l=!1,u=void 0;try{for(var s,c=this.edges[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var f=s.value;r=f.x<r?f.x:r,n=f.x>n?f.x:n,a=f.y<a?f.y:a,o=f.y>o?f.y:o}}catch(d){l=!0,u=d}finally{try{i||null==c.return||c.return()}finally{if(l)throw u}}return new t.default((r+n)/2,(a+o)/2)}},{key:"boundingBox",value:function(e){var r=e.canvas.width,n=0,a=e.canvas.height,o=0,i=!0,l=!1,u=void 0;try{for(var s,c=this.edges[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var f=s.value;r=f.x<r?f.x:r,n=f.x>n?f.x:n,a=f.y<a?f.y:a,o=f.y>o?f.y:o}}catch(d){l=!0,u=d}finally{try{i||null==c.return||c.return()}finally{if(l)throw u}}this.boundaries=[new t.default(r,a),new t.default(n,a),new t.default(n,o),new t.default(r,o)],e.debugMode&&(e.context.lineWidth=1,e.context.strokeStyle="#FF0000",e.context.strokeRect(r,a,n-r,o-a),e.context.lineWidth=e.currentSize)}},{key:"scatterPoints",value:function(e){var r=this;if("parks"!==this.color&&"water"!==this.color){for(var n=[],a=this.boundaries[0].x,o=this.boundaries[0].y,i=this.boundaries[1].x,l=this.boundaries[3].y,u=a;u<i;u+=e.scale)for(var s=o;s<l;s+=e.scale){var c=Math.min(u+Math.random()*e.scale,i),f=Math.min(s+Math.random()*e.scale,l);n.push(new t.default(Math.round(c),Math.round(f)))}if(e.debugMode)for(var d=0;d<n.length;d++){var h=n[d];e.context.fillStyle="#000",e.context.fillRect(h.x,h.y,1,1)}var y={};if(this.edges.forEach(function(t){y[t.y]?y[t.y].push(t.x):y[t.y]=[t.x]}),this.points=[],n.forEach(function(t){for(var e=0,n=0,a=t.x;a<i+1;a++)y[t.y].includes(a)&&(a-e>1&&n++,e=a);n%2!=0&&r.points.push(t)}),e.debugMode){var v=!0,x=!1,b=void 0;try{for(var p,w=this.points[Symbol.iterator]();!(v=(p=w.next()).done);v=!0){var g=p.value;e.context.fillStyle="#FF0000",e.context.fillRect(g.x,g.y,1,1)}}catch(M){x=!0,b=M}finally{try{v||null==w.return||w.return()}finally{if(x)throw b}}}}}}]),e}();exports.default=o;
},{"./Point.js":"hpvp"}],"nZps":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BUILDING_PLACEMENT_LOOP_LIMIT=exports.QUADTREE_MAX_LEVELS=exports.QUADTREE_MAX_OBJECTS=exports.NORMAL_BRANCH_TIME_DELAY_FROM_HIGHWAY=exports.MIN_SPEED_PROPORTION=exports.MINIMUM_INTERSECTION_DEVIATION=exports.ROAD_SNAP_DISTANCE=exports.NORMAL_BRANCH_POPULATION_THRESHOLD=exports.HIGHWAY_BRANCH_POPULATION_THRESHOLD=exports.DEFAULT_BRANCH_PROBABILITY=exports.HIGHWAY_BRANCH_PROBABILITY=exports.SKYSCRAPER_FORWARD_ANGLE=exports.SKYSCRAPER_BRANCH_ANGLE=exports.FORWARD_ANGLE=exports.BRANCH_ANGLE=exports.SEGMENT_COUNT_LIMIT=exports.HIGHWAY_SEGMENT_LENGTH=exports.DEFAULT_SEGMENT_LENGTH=exports.HIGHWAY_SEGMENT_WIDTH=exports.DEFAULT_SEGMENT_WIDTH=void 0;var _=1;exports.DEFAULT_SEGMENT_WIDTH=_;var E=2;exports.HIGHWAY_SEGMENT_WIDTH=E;var A=25;exports.DEFAULT_SEGMENT_LENGTH=A;var N=30;exports.HIGHWAY_SEGMENT_LENGTH=N;var r=500;exports.SEGMENT_COUNT_LIMIT=r;var T=3;exports.BRANCH_ANGLE=T;var I=10;exports.FORWARD_ANGLE=I;var R=1;exports.SKYSCRAPER_BRANCH_ANGLE=R;var H=1;exports.SKYSCRAPER_FORWARD_ANGLE=H;var L=.05;exports.HIGHWAY_BRANCH_PROBABILITY=L;var e=.4;exports.DEFAULT_BRANCH_PROBABILITY=e;var O=.1;exports.HIGHWAY_BRANCH_POPULATION_THRESHOLD=O;var t=.1;exports.NORMAL_BRANCH_POPULATION_THRESHOLD=t;var o=5;exports.ROAD_SNAP_DISTANCE=o;var s=30;exports.MINIMUM_INTERSECTION_DEVIATION=s;var p=.1;exports.MIN_SPEED_PROPORTION=p;var x=5;exports.NORMAL_BRANCH_TIME_DELAY_FROM_HIGHWAY=x;var M=10;exports.QUADTREE_MAX_OBJECTS=M;var D=10;exports.QUADTREE_MAX_LEVELS=D;var G=3;exports.BUILDING_PLACEMENT_LOOP_LIMIT=G;
},{}],"NKbW":[function(require,module,exports) {
"use strict";function n(n,r){return Math.random()*(r-n)+n}function r(n,r){var t=Math.abs(n-r)%180;return Math.min(t,Math.abs(t-180))}function t(r){for(var t=Math.pow(Math.abs(r),3),e=0;0===e||Math.random()<Math.pow(Math.abs(e),3)/t;)e=n(-r,r);return e}function e(n){var r=n[0],t=0;return n.forEach(function(n,e){n<r&&(r=n,t=e)}),[r,t]}function a(n){var r=n[0],t=0;return n.forEach(function(n,e){n>r&&(r=n,t=e)}),[r,t]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomRange=n,exports.minDegreeDifference=r,exports.randomAngle=t,exports.minAndIndex=e,exports.maxAndIndex=a;
},{}],"PeoA":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.seed=s,exports.simplex2=h;var r=function(){function n(t,r,o){e(this,n),this.x=t,this.y=r,this.z=o}return t(n,[{key:"dot2",value:function(e,n){return this.x*e+this.y*n}}]),n}(),o=[new r(1,1,0),new r(-1,1,0),new r(1,-1,0),new r(-1,-1,0),new r(1,0,1),new r(-1,0,1),new r(1,0,-1),new r(-1,0,-1),new r(0,1,1),new r(0,-1,1),new r(0,1,-1),new r(0,-1,-1)],a=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],i=new Array(512),u=new Array(512);function s(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var n=0;n<256;n++){var t=1&n?a[n]^255&e:a[n]^e>>8&255;i[n]=i[n+256]=t,u[n]=u[n+256]=o[t%12]}}s(0);var f=.5*(Math.sqrt(3)-1),w=(3-Math.sqrt(3))/6,c=1/3,l=1/6;function h(e,n){var t=(e+n)*f,r=Math.floor(e+t),o=Math.floor(n+t),a=(r+o)*w,s=e-r+a,c=n-o+a,l=s>c?1:0,h=s>c?0:1,v=s-l+w,y=c-h+w,p=s-1+2*w,d=c-1+2*w,b=u[(r&=255)+i[o&=255]],x=u[r+l+i[o+h]],M=u[r+1+i[o+1]],m=.5-s*s-c*c,g=.5-v*v-y*y,j=.5-p*p-d*d;return 70*((m<0?0:(m*=m)*m*b.dot2(s,c))+(g<0?0:(g*=g)*g*x.dot2(v,y))+(j<0?0:(j*=j)*j*M.dot2(p,d)))}
},{}],"rTaa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./../perlin.js"));function t(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var a=function(){function t(){r(this,t)}return o(t,null,[{key:"populationAt",value:function(t,r){var n=(e.simplex2(t/500,r/500)+1)/2,o=(e.simplex2(t/1e3+50,r/1e3+50)+1)/2,a=(e.simplex2(t/1e3+100,r/1e3+100)+1)/2;return Math.pow((n*o+a)/2,2)}},{key:"popOnRoad",value:function(e){return(t.populationAt(e.start.x,e.start.y)+t.populationAt(e.end.x,e.end.y))/2}}]),t}();exports.default=a;
},{"./../perlin.js":"PeoA"}],"Exiy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("./../util.js")),e=r(require("./Point.js"));function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};i.get||i.set?Object.defineProperty(e,r,i):e[r]=t[r]}return e.default=t,e}function n(t,e){return p(t)||s(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,e){var r=[],i=!0,n=!1,o=void 0;try{for(var s,p=t[Symbol.iterator]();!(i=(s=p.next()).done)&&(r.push(s.value),!e||r.length!==e);i=!0);}catch(u){n=!0,o=u}finally{try{i||null==p.return||p.return()}finally{if(n)throw o}}return r}function p(t){if(Array.isArray(t))return t}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),t}var l=function(){function r(t,e,i){c(this,r),this.object=t,this.type=e,this.properties=i,this.collisionRevision=0}return a(r,null,[{key:"Type",get:function(){return{RECT:"rect",LINE:"line",CIRCLE:"circle"}}}]),a(r,[{key:"updateCollisionProperties",value:function(t){for(var e in this.collisionRevision++,t)this.properties[e]=t[e]}},{key:"minCorner",value:function(t){var e=this.properties.corners[0];return this.properties.corners.forEach(function(r){r[t]<e[t]&&(e=r)}),e}},{key:"maxCorner",value:function(t){var e=this.properties.corners[0];return this.properties.corners.forEach(function(r){r[t]>e[t]&&(e=r)}),e}},{key:"limits",value:function(){if(this.collisionRevision!==this.limitsRevision)if(this.limitsRevision=this.collisionRevision,this.type===r.Type.RECT){var t=this.minCorner("x").x,e=this.minCorner("y").y;this.cachedLimits={x:t,y:e,width:this.maxCorner("x").x-t,height:this.maxCorner("y").y-e,object:this.object}}else this.type===r.Type.LINE?this.cachedLimits={x:Math.min(this.properties.start.x,this.properties.end.x),y:Math.min(this.properties.start.y,this.properties.end.y),width:Math.abs(this.properties.start.x-this.properties.end.x),height:Math.abs(this.properties.start.y-this.properties.end.y),object:this.object}:this.type===r.Type.CIRCLE&&(this.cachedLimits={x:this.properties.center.x-this.properties.radius,y:this.properties.center.y-this.properties.radius,width:2*this.properties.radius,height:2*this.properties.radius,object:this.object});return this.cachedLimits}},{key:"collide",value:function(t){var e=this.limits(),i=t.limits();if(e&&i&&(e.x+e.width<i.x||i.x+i.width<e.x)&&(e.y+e.height<i.y||i.y+i.height<e.y))return!1;if(this.type===r.Type.CIRCLE){if(t.type===r.Type.RECT)return t.rectCircleCollision(this)}else{if(this.type===r.Type.RECT)return t.type!==r.Type.CIRCLE?this.rectRectIntersection(t):this.rectCircleCollision(t);if(this.type===r.Type.LINE&&t.type!==r.Type.CIRCLE)return this.rectRectIntersection(t)}}},{key:"rectCircleCollision",value:function(t){if(this.type!==r.Type.CIRCLE&&t.type===r.Type.CIRCLE){var e=(this.type===r.Type.LINE?this.rectPropsFromLine():this.properties).corners,i=t.properties.center,n=t.properties.radius,o=!0,s=!1,p=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){if(u.value.distance2(i)<=n*n)return!0}}catch(g){s=!0,p=g}finally{try{o||null==c.return||c.return()}finally{if(s)throw p}}for(var h=0;h<e.length;h++){var a=e[h],l=e[(h+1)%e.length],y=i.distanceToLine(a,l),f=y.distance2,d=(y.pointOnLine,y.lineProj2),m=y.length2;if(d>0&&d<m&&f<=n*n)return!0}var v=[e[3].minus(e[0]),e[3].minus(e[2])],C=i.minus(e[0]),b=i.minus(e[2]),x=[C.project(v[0]),b.project(v[1])],L=[C.dot(v[0]),b.dot(v[1])];return!(L[0]<0||x[0].length2()>v[0].length2()||L[1]<0||x[1].length2()>v[1].length2())}}},{key:"rectPropsFromLine",value:function(){if(this.type===r.Type.LINE){var t=this.properties.end.minus(this.properties.start),i=new e.default(-t.y,t.x),n=i.scalarMultiply(.5*this.properties.width/i.length());return{corners:[this.properties.start.add(n),this.properties.start.minus(n),this.properties.end.minus(n),this.properties.end.add(n)]}}}},{key:"rectRectIntersection",value:function(e){if(this.type!==r.Type.CIRCLE&&e.type!==r.Type.CIRCLE){for(var i=this.type===r.Type.LINE?this.rectPropsFromLine().corners:this.properties.corners,o=e.type===r.Type.LINE?e.rectPropsFromLine().corners:e.properties.corners,s=[i[3].minus(i[0]),i[3].minus(i[2]),o[0].minus(o[1]),o[0].minus(o[3])],p=[],c=function(){var e=s[h],r=i.map(function(t){return t.project(e)}),u=o.map(function(t){return t.project(e)}),c=r.map(function(t){return t.dot(e)}),a=u.map(function(t){return t.dot(e)}),l=n(t.maxAndIndex(c),2),y=l[0],f=l[1],d=n(t.minAndIndex(c),2),m=d[0],v=d[1],C=n(t.maxAndIndex(a),2),b=C[0],x=C[1],L=n(t.minAndIndex(a),2),g=L[0],E=L[1];if(y<g||b<m)return{v:!1};var T=r[f].minus(u[E]),I=u[x].minus(r[v]);T.length2()<I.length2()?p.push(T):p.push(I.scalarMultiply(-1))},h=0;h<s.length;h++){var a=c();if("object"===u(a))return a.v}var l=p[0];return p.forEach(function(t){t.length2()<l.length2()&&(l=t)}),l.scalarMultiply(-1)}}}]),r}();exports.default=l;
},{"./../util.js":"NKbW","./Point.js":"hpvp"}],"AU+w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./Point.js"));function e(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,s){return e&&n(t.prototype,e),s&&n(t,s),t}var i=function(){function e(t,n,r){s(this,e),this.start=t,this.end=n,this.segment=r}return r(e,[{key:"setStart",value:function(t){this.start=t,this.segment.collider.updateCollisionProperties({start:t}),this.segment.roadRevision++}},{key:"setEnd",value:function(t){this.end=t,this.segment.collider.updateCollisionProperties({end:t}),this.segment.roadRevision++}},{key:"intersects",value:function(e){var s=this.end.minus(this.start),n=e.end.minus(e.start),r=e.start.minus(this.start),i=r.cross(s),o=s.cross(n);if(0===o||0===i)return!1;var a=i/o,u=r.cross(n)/o,l=u>.001&&u<.999&&a>.001&&a<.999;return l?new t.default(this.start.x+u*s.x,this.start.y+u*s.y):l}}]),e}();exports.default=i;
},{"./Point.js":"hpvp"}],"qcWc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./Segment.js")),t=n(require("./Point.js"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var u=function(){function n(){r(this,n)}return o(n,null,[{key:"fromExisting",value:function(t,n,r,a){return n=n||t.time,r=r||t.road,a=a||t.params,new e.default(r.start,r.end,n,a)}},{key:"usingDirection",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:DEFAULT_SEGMENT_LENGTH,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};r*=Math.PI/180;var i=n.x+a*Math.sin(r),l=n.y+a*Math.cos(r);return new e.default(n,new t.default(i,l),o,u)}}]),n}();exports.default=u;
},{"./Segment.js":"Uj5g","./Point.js":"hpvp"}],"Uj5g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=require("./../config.js"),s=r(require("./Collision.js")),t=r(require("./Road.js")),n=r(require("./Point.js")),e=r(require("./SegmentFactory.js"));function r(i){return i&&i.__esModule?i:{default:i}}function a(i,s){if(!(i instanceof s))throw new TypeError("Cannot call a class as a function")}function d(i,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function o(i,s,t){return s&&d(i.prototype,s),t&&d(i,t),i}var h=function(){function r(n,e){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a(this,r),this.start=n,this.end=e,this.time=d,this.params=o,this.width=o.highway?i.HIGHWAY_SEGMENT_WIDTH:i.DEFAULT_SEGMENT_WIDTH,this.collider=new s.default(this,s.default.Type.LINE,{start:n,end:e,width:this.width}),this.roadRevision=0,this.road=new t.default(n,e,this),this.time=d,this.params=o,this.links={backwards:[],forwards:[]},this.users=[],this.maxSpeed=o.highway?1200:800,this.capacity=o.highway?12:6}return o(r,null,[{key:"End",get:function(){return{START:"start",END:"end"}}}]),o(r,[{key:"currentSpeed",value:function(){return Math.min(i.MIN_SPEED_PROPORTION,1-Math.max(0,this.users.length-1)/this.capacity)*this.maxSpeed}},{key:"direction",value:function(){if(this.directionRevision!==this.roadRevision){this.directionRevision=this.roadRevision;var i=new n.default(0,1),s=this.road.end.minus(this.road.start),t=i.cross(s),e=t>0?-1:t<0?1:0;this.cachedDirection=e*i.angle(s)}return this.cachedDirection}},{key:"length",value:function(){return this.lengthRevision!==this.roadRevision&&(this.lengthRevision=this.roadRevision,this.cachedLength=this.road.start.distance(this.road.end)),this.cachedLength}},{key:"startIsBackwards",value:function(){return this.links.backwards.length?this.links.backwards[0].road.start.equals(this.road.start)||this.links.backwards[0].road.end.equals(this.road.start):this.links.forwards[0].road.start.equals(this.road.end)||this.links.forwards[0].road.end.equals(this.road.end)}},{key:"cost",value:function(){return this.length()/this.currentSpeed()}},{key:"costTo",value:function(i,s){var t=this.endContaining(i),n=s?t===r.End.START?s:1-s:.5;return this.cost()*n}},{key:"neighbors",value:function(){return this.links.forwards.concat(this.links.backwards)}},{key:"endContaining",value:function(i){var s=this.startIsBackwards();return this.links.backwards.includes(i)?s?r.End.START:r.End.END:this.links.forwards.includes(i)?s?r.End.END:r.End.START:void 0}},{key:"linksForEndContaining",value:function(i){return this.links.backwards.includes(i)?this.links.backwards:this.links.forwards.includes(i)?this.links.forwards:void 0}},{key:"split",value:function(i,s,t,n){var r=this,a=this.startIsBackwards(),d=e.default.fromExisting(this);d.addSegment(t,n),d.road.setEnd(i),this.road.setStart(i),d.links.backwards=this.links.backwards.slice(0),d.links.forwards=this.links.forwards.slice(0);var o=a?d:this,h=a?this:d;(a?d.links.backwards:d.links.forwards).forEach(function(i){var s=i.links.backwards.indexOf(r);-1!==s?i.links.backwards[s]=d:(s=i.links.forwards.indexOf(r),i.links.forwards[s]=d)}),o.links.forwards=[s,h],h.links.backwards=[s,o],s.links.forwards.push(o),s.links.forwards.push(h)}},{key:"addSegment",value:function(i,s){i.push(this),s.insert(this.collider.limits())}}]),r}();exports.default=h;
},{"./../config.js":"nZps","./Collision.js":"Exiy","./Road.js":"AU+w","./Point.js":"hpvp","./SegmentFactory.js":"qcWc"}],"x6W/":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function i(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=function(){function e(i){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t(this,e),this.bounds=i,this.maxObjects=s,this.maxLevels=n,this.level=h,this.objects=[],this.nodes=[]}return i(e,[{key:"subdivide",value:function(){var t=Math.round(this.bounds.width/2),i=Math.round(this.bounds.height/2),s=Math.round(this.bounds.x),n=Math.round(this.bounds.y);this.nodes[0]=new e({x:s+t,y:n,width:t,height:i},this.maxObjects,this.maxLevels,this.level+1),this.nodes[1]=new e({x:s,y:n,width:t,height:i},this.maxObjects,this.maxLevels,this.level+1),this.nodes[2]=new e({x:s,y:n+i,width:t,height:i},this.maxObjects,this.maxLevels,this.level+1),this.nodes[3]=new e({x:s+t,y:n+i,width:t,height:i},this.maxObjects,this.maxLevels,this.level+1)}},{key:"getIndex",value:function(t){var e=-1,i=this.bounds.x+this.bounds.width/2,s=this.bounds.y+this.bounds.height/2,n=t.y<s&&t.y+t.height<s,h=t.y>s;return t.x<i&&t.x+t.width<i?e=n?1:h?2:e:t.x>i&&(e=n?0:h?3:e),e}},{key:"insert",value:function(t){if(this.nodes.length){var e=this.getIndex(t);if(-1!==e)return this.nodes[e].insert(t)}if(this.objects.push(t),this.objects.length>this.maxObjects&&this.level<this.maxLevels){0===this.nodes.length&&this.subdivide();for(var i=0;i<this.objects.length;){var s=this.getIndex(this.objects[i]);-1!==s?this.nodes[s].insert(this.objects.splice(i,1)[0]):i++}}}},{key:"retrieve",value:function(t){var e=this.getIndex(t),i=this.objects;if(this.nodes.length)if(-1!==e)i=i.concat(this.nodes[e].retrieve(t));else{var s=!0,n=!1,h=void 0;try{for(var r,o=this.nodes[Symbol.iterator]();!(s=(r=o.next()).done);s=!0){var a=r.value;i=i.concat(a.retrieve(t))}}catch(l){n=!0,h=l}finally{try{s||null==o.return||o.return()}finally{if(n)throw h}}}return i}},{key:"clear",value:function(){this.objects=[];var t=!0,e=!1,i=void 0;try{for(var s,n=this.nodes[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){s.value.clear()}}catch(h){e=!0,i=h}finally{try{t||null==n.return||n.return()}finally{if(e)throw i}}}}]),e}();exports.default=s;
},{}],"zNwF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./Collision.js")),t=i(require("./Point.js"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}var a=function(){function i(t,s,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;r(this,i),this.center=t,this.direction=s,this.diagonal=n,this.type=a,this.aspectDegree=180*Math.atan(o)/Math.PI,this.corners=this.generateCorners(),this.collider=new e.default(this,e.default.Type.RECT,{corners:this.corners}),this.supply=[],this.demand=[]}return n(i,null,[{key:"Type",get:function(){return{RESIDENTIAL:"residential",OTHER:"other"}}}]),n(i,[{key:"generateCorners",value:function(){return[new t.default(this.center.x+this.diagonal*Math.sin((+this.aspectDegree+this.direction)*Math.PI/180),this.center.y+this.diagonal*Math.cos((+this.aspectDegree+this.direction)*Math.PI/180)),new t.default(this.center.x+this.diagonal*Math.sin((-this.aspectDegree+this.direction)*Math.PI/180),this.center.y+this.diagonal*Math.cos((-this.aspectDegree+this.direction)*Math.PI/180)),new t.default(this.center.x+this.diagonal*Math.sin((180+this.aspectDegree+this.direction)*Math.PI/180),this.center.y+this.diagonal*Math.cos((180+this.aspectDegree+this.direction)*Math.PI/180)),new t.default(this.center.x+this.diagonal*Math.sin((180-this.aspectDegree+this.direction)*Math.PI/180),this.center.y+this.diagonal*Math.cos((180-this.aspectDegree+this.direction)*Math.PI/180))]}},{key:"setCenter",value:function(e){this.center=e,this.corners=this.generateCorners(),this.collider.updateCollisionProperties({corners:this.corners})}},{key:"setDirection",value:function(e){this.direction=e,this.corners=this.generateCorners(),this.collider.updateCollisionProperties({corners:this.corners})}}]),i}();exports.default=a;
},{"./Collision.js":"Exiy","./Point.js":"hpvp"}],"pJh0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./../config.js"),r=require("./../util.js"),t=a(require("./Building.js")),n=a(require("./Point.js"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function u(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,r,t){return r&&u(e.prototype,r),t&&u(e,t),e}var l=function(){function a(){o(this,a)}return i(a,null,[{key:"fromProbability",value:function(){return Math.random()<.4?a.byType(t.default.Type.OTHER):a.byType(t.default.Type.RESIDENTIAL)}},{key:"byType",value:function(e){return e===t.default.Type.RESIDENTIAL?new t.default(new n.default(0,0),0,5,t.default.Type.RESIDENTIAL):new t.default(new n.default(0,0),0,8,t.default.Type.OTHER,(0,r.randomRange)(.5,2))}},{key:"aroundSegment",value:function(r,t,a,o,u){for(var i=[],l=0;l<a;l++){var f=2*Math.random()*Math.PI,d=Math.random()*o,c=new n.default(.5*(t.road.start.x+t.road.end.x)+d*Math.sin(f),.5*(t.road.start.y+t.road.end.y)+d*Math.cos(f)),y=r();y.setCenter(c),y.setDirection(t.direction());for(var s=!1,v=0;v<e.BUILDING_PLACEMENT_LOOP_LIMIT;v++){var T=0,p=u.retrieve(y.collider.limits()).concat(i),b=!0,I=!1,E=void 0;try{for(var h,M=p[Symbol.iterator]();!(b=(h=M.next()).done);b=!0){var L=h.value;L.object&&(L=L.object);var m=y.collider.collide(L.collider);if(m){if(T++,v===e.BUILDING_PLACEMENT_LOOP_LIMIT-1)break;y.setCenter(y.center.add(m))}}}catch(_){I=!0,E=_}finally{try{b||null==M.return||M.return()}finally{if(I)throw E}}if(0===T){s=!0;break}}s&&i.push(y)}return i}}]),a}();exports.default=l;
},{"./../config.js":"nZps","./../util.js":"NKbW","./Building.js":"zNwF","./Point.js":"hpvp"}],"s9Z0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generate=A;var r=require("./config.js"),e=c(require("./util.js")),n=c(require("./perlin.js")),t=u(require("./classes/Point.js")),a=u(require("./classes/Heatmap.js")),i=u(require("./classes/Segment.js")),o=u(require("./classes/QuadTree.js")),s=u(require("./classes/SegmentFactory.js")),d=u(require("./classes/BuildingFactory.js"));function u(r){return r&&r.__esModule?r:{default:r}}function c(r){if(r&&r.__esModule)return r;var e={};if(null!=r)for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var t=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,n):{};t.get||t.set?Object.defineProperty(e,n,t):e[n]=r[n]}return e.default=r,e}function f(r){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function l(n,t,a){var i={priority:0,params:{}},o=a.retrieve(n.collider.limits()),s=!0,d=!1,u=void 0;try{for(var c,l=function(){var o=c.value.object;if(i.priority<5){var s=n.road.intersects(o.road);if(s&&(!i.params.time||s.time<actions.params.time))return i.params.time=s.time,i.priority=4,e.minDegreeDifference(o.direction(),n.direction())<r.MINIMUM_INTERSECTION_DEVIATION?{v:!1}:(o.split(s,n,t,a),n.road.end=s,n.params.severed=!0,{v:!0})}if(i.priority<4&&n.road.end.distance(o.road.end)<=r.ROAD_SNAP_DISTANCE){var d=o.road.end;i.priority=3,n.road.end=d,n.params.severed=!0;var u=o.startIsBackwards()?o.links.forwards:o.links.backwards;return u.some(function(r){return r.road.start.equals(n.road.end)&&r.road.end.equals(n.road.start)||r.road.start.equals(n.road.start)&&r.road.end.equals(n.road.end)})?{v:!1}:(u.forEach(function(r){r.linksForEndContaining(o).push(n),n.links.forwards.push(r)}),u.push(n),n.links.forwards.push(o),{v:!0})}if(i.priority<3){var f=n.road.end.distanceToLine(o.road.start,o.road.end),l=f.distance2,p=f.pointOnLine,A=f.lineProj2,_=f.length2;if(l<r.ROAD_SNAP_DISTANCE*r.ROAD_SNAP_DISTANCE&&A>=0&&A<=_){var E=p;return i.priority=2,n.road.end=E,n.params.severed=!0,e.minDegreeDifference(o.direction(),n.direction())<r.MINIMUM_INTERSECTION_DEVIATION?{v:!1}:(o.split(E,n,t,a),{v:!0})}}},p=o[Symbol.iterator]();!(s=(c=p.next()).done);s=!0){var A=l();if("object"===f(A))return A.v}}catch(_){d=!0,u=_}finally{try{s||null==p.return||p.return()}finally{if(d)throw u}}return!0}function p(n,t){var i=[];if(!n.params.severed){var o=function(r,e,t,a){return s.default.usingDirection(n.road.end,r,e,t,a)},d=function(r){return o(r,n.length(),0,n.params)},u=function(e){return o(e,r.DEFAULT_SEGMENT_LENGTH,n.params.highway?r.NORMAL_BRANCH_TIME_DELAY_FROM_HIGHWAY:0)},c=d(n.direction()),f=a.default.popOnRoad(c.road),l="skyscrapers"===t?r.SKYSCRAPER_FORWARD_ANGLE:r.FORWARD_ANGLE,p="skyscrapers"===t?r.SKYSCRAPER_BRANCH_ANGLE:r.BRANCH_ANGLE;if(n.params.highway){var A=d(n.direction()+e.randomAngle(l)),_=a.default.popOnRoad(A.road),E=_>f?_:f;if(i.push(_>f?A:c),E>r.HIGHWAY_BRANCH_POPULATION_THRESHOLD)if(Math.random()<r.HIGHWAY_BRANCH_PROBABILITY){var m=d(n.direction()-90+e.randomAngle(p));i.push(m)}else if(Math.random()<r.HIGHWAY_BRANCH_PROBABILITY){var h=d(n.direction()+90+e.randomAngle(p));i.push(h)}}else f>r.NORMAL_BRANCH_POPULATION_THRESHOLD&&i.push(c);if(f>r.NORMAL_BRANCH_POPULATION_THRESHOLD)if(Math.random()<r.DEFAULT_BRANCH_PROBABILITY){var N=u(n.direction()-90+e.randomAngle(p));i.push(N)}else if(Math.random()<r.DEFAULT_BRANCH_PROBABILITY){var v=u(n.direction()+90+e.randomAngle(p));i.push(v)}}for(var y=function(){var r=i[T];r.setUpBranchLinks=function(){n.links.forwards.forEach(function(e){r.links.backwards.push(e),e.linksForEndContaining(n).push(r)}),n.links.forwards.push(r),r.links.backwards.push(n)}},T=0;T<i.length;T++)y();return i}function A(e,a){n.seed(Math.random());var u=[],c=new i.default(e,new t.default(e.x+r.HIGHWAY_SEGMENT_LENGTH,e.y),0,{highway:!0}),f=s.default.fromExisting(c),A=new t.default(c.road.start.x-r.HIGHWAY_SEGMENT_LENGTH,f.road.end.y);f.road.setEnd(A),f.links.backwards.push(c),c.links.backwards.push(f),u.push(c),u.push(f);for(var _=[],E={x:e.x,y:e.y,width:r.HIGHWAY_SEGMENT_LENGTH,height:r.HIGHWAY_SEGMENT_LENGTH},m=new o.default(E,r.QUADTREE_MAX_OBJECTS,r.QUADTREE_MAX_LEVELS),h=function(){var r=u[0].time,e=0;u.forEach(function(n,t){n.time<r&&(r=n.time,e=t)});var n=u.splice(e,1)[0];l(n,_,m)&&(n.setUpBranchLinks&&n.setUpBranchLinks(),n.addSegment(_,m),p(n,a).forEach(function(r){r.time+=n.time+1,u.push(r)}))};u.length&&_.length<r.SEGMENT_COUNT_LIMIT;)h();for(var N=0,v=0;v<_.length;v++){_[v].id=N++}var y=[];return _.forEach(function(r){var e=d.default.aroundSegment(d.default.fromProbability,r,5,40,m);e.forEach(function(r){return m.insert(r.collider.limits())}),y=y.concat(e)}),{segments:_,buildings:y}}
},{"./config.js":"nZps","./util.js":"NKbW","./perlin.js":"PeoA","./classes/Point.js":"hpvp","./classes/Heatmap.js":"rTaa","./classes/Segment.js":"Uj5g","./classes/QuadTree.js":"x6W/","./classes/SegmentFactory.js":"qcWc","./classes/BuildingFactory.js":"pJh0"}],"3JeV":[function(require,module,exports) {
"use strict";function e(e,r){e.strokeStyle=r.params.highway?"#FF0000":"#000000",e.lineWidth=r.width,e.beginPath(),e.moveTo(r.road.start.x,r.road.start.y),e.lineTo(r.road.end.x,r.road.end.y),e.closePath(),e.stroke()}function r(e,r){e.fillStyle="rgba(0,0,0,0.2)",e.beginPath(),e.moveTo(r.corners[0].x,r.corners[0].y),e.lineTo(r.corners[1].x,r.corners[1].y),e.lineTo(r.corners[2].x,r.corners[2].y),e.lineTo(r.corners[3].x,r.corners[3].y),e.closePath(),e.fill()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawSegment=e,exports.drawBuilding=r;
},{}],"VIuS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=x;var e=o(require("./classes/Point.js")),t=o(require("./classes/Circle.js")),n=o(require("./classes/Polygon.js")),r=i(require("./generation.js")),a=i(require("./draw.js"));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}var s="PointerEvent"in window,c="ontouchstart"in window,u={drawing:!1,xClicks:[],yClicks:[],dragClicks:[],currentBrush:document.querySelector(".active").classList[1],lastBrush:document.querySelector(".active").classList[1],currentSize:parseInt(document.getElementById("brush-size").value),brushes:Array.prototype.slice.call(document.getElementsByClassName("brush")),brushColors:{skyscrapers:"rgb(203,203,203)",residential:"rgb(252,139,148)",commercial:"rgb(191,140,190)",water:"rgb(180,207,226)",parks:"rgb(140,191,142)"},clickData:{skyscrapers:[],residential:[],commercial:[],water:[],parks:[]},innerPoints:{skyscrapers:[],residential:[],commercial:[],water:[],parks:[]},polygons:[],polygonIndex:0,debugMode:!1,scale:20};function l(){for(var e=0;e<u.xClicks.length;e++)u.context.strokeStyle=u.brushColors[u.currentBrush],u.context.lineWidth=u.currentSize,u.context.beginPath(),u.dragClicks[e]&&e>0?u.context.moveTo(u.xClicks[e-1],u.yClicks[e-1]):u.context.moveTo(u.xClicks[e]-1,u.yClicks[e]-1),u.context.lineTo(u.xClicks[e],u.yClicks[e]),u.context.closePath(),u.context.stroke()}function d(e,n,r){u.xClicks.push(e),u.yClicks.push(n),u.dragClicks.push(r),u.clickData[u.currentBrush].push(new t.default(e,n,u.currentSize))}function f(){u.brushes.forEach(function(e){e.classList.remove("active")})}function y(e){var t=u.clickData[u.lastBrush].length-1;t>-1&&u.polygons.push(h(u.clickData[u.lastBrush][t],u.lastBrush));var n=e.pageX-canvas.offsetLeft,r=e.pageY-canvas.offsetTop;u.drawing=!0,d(n,r),l()}function v(e){u.drawing&&(d(e.pageX-canvas.offsetLeft,e.pageY-canvas.offsetTop,!0),l())}function g(e){u.drawing=!1,u.xClicks=[],u.yClicks=[],u.dragClicks=[]}function h(t,r){for(var a=[],i=u.brushColors[r].slice(4,-1).split(","),o=t.x+t.r-1,s=t.y,c=t.x+t.r-1,l=u.context.getImageData(c++,s,1,1).data;l[0]==i[0]&&l[1]==i[1]&&l[2]==i[2];)o=c,l=u.context.getImageData(c++,s,1,1).data;var d=new e.default(o-1,s);return function t(n,r){var o=[new e.default(n.x+1,n.y),new e.default(n.x+1,n.y+1),new e.default(n.x,n.y+1),new e.default(n.x-1,n.y+1),new e.default(n.x-1,n.y),new e.default(n.x-1,n.y-1),new e.default(n.x,n.y-1),new e.default(n.x+1,n.y-1)],s=o.findIndex(function(e){return e.x===r.x&&e.y===r.y});if(s<7)for(var c=0;c<s+1;c++)o.splice(7,0,o.shift());var l=o.findIndex(function(e){var t=u.context.getImageData(e.x,e.y,1,1).data;return Math.abs(t[0]-i[0])>5||Math.abs(t[1]-i[1])>5||Math.abs(t[2]-i[2])>5}),f=o.findIndex(function(e){var t=u.context.getImageData(e.x,e.y,1,1).data;return(e.x!==r.x||e.y!==r.y)&&Math.abs(t[0]-i[0])<6&&Math.abs(t[1]-i[1])<6&&Math.abs(t[2]-i[2])<6});if(-1!==l){a.push(new e.default(n.x,n.y));var y=o[f];if(y.x===d.x&&y.y===d.y)return;return t(y,n)}}(d,d),new n.default(a,r)}function p(){var e=u.clickData[u.currentBrush].length-1;e>-1&&u.polygons.push(h(u.clickData[u.currentBrush][e],u.currentBrush));var t=!0,n=!1,r=void 0;try{for(var a,i=u.polygons[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o.boundingBox(u),o.scatterPoints(u)}}catch(s){n=!0,r=s}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}function x(e,t){t.lineJoin="round",u.canvas=e,u.context=t;var n=document.getElementById("brush-size"),i=document.getElementById("current-brush-size");window.addEventListener("resize",function(){e.width=.85*window.innerWidth,e.height=window.innerHeight,l()}),s?(e.addEventListener("pointerdown",function(e){y(e)}),e.addEventListener("pointermove",function(e){v(e)}),e.addEventListener("pointerup",function(e){g(e)}),e.addEventListener("pointercancel",function(e){g(e)})):c?(e.addEventListener("touchstart",function(e){y(e)}),e.addEventListener("touchmove",function(e){v(e)}),e.addEventListener("touchend",function(e){g(e)}),e.addEventListener("touchcancel",function(e){g(e)})):(e.addEventListener("mousedown",function(e){y(e)}),e.addEventListener("mousemove",function(e){v(e)}),e.addEventListener("mouseup",function(e){g(e)}),e.addEventListener("mouseleave",function(e){g(e)})),u.brushes.forEach(function(e){e.addEventListener("click",function(){f(),u.lastBrush=u.currentBrush,u.currentBrush=e.classList[1],e.classList.add("active")})}),n.addEventListener("input",function(e){u.currentSize=parseInt(n.value),i.innerText=n.value}),document.getElementById("debug").addEventListener("change",function(e){u.debugMode=e.target.checked,document.getElementById("debug-controls").style.display=u.debugMode?"block":"none"}),document.getElementById("edges").addEventListener("click",function(e){var n=!0,r=!1,a=void 0;try{for(var i,o=u.polygons[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,c=!0,l=!1,d=void 0;try{for(var f,y=s.edges[Symbol.iterator]();!(c=(f=y.next()).done);c=!0){var v=f.value;t.fillStyle="#000",t.fillRect(v.x,v.y,1,1)}}catch(g){l=!0,d=g}finally{try{c||null==y.return||y.return()}finally{if(l)throw d}}}}catch(g){r=!0,a=g}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}),document.getElementById("analyze").addEventListener("click",function(e){p(),e.target.disabled=!0,e.target.classList.add("disabled")}),document.getElementById("generate").addEventListener("click",function(e){var t=u.clickData[u.currentBrush].length-1;t>-1&&u.polygons.push(h(u.clickData[u.currentBrush][t],u.currentBrush)),u.polygons.forEach(function(e){if("parks"!==e.color&&"water"!==e.color){var t=r.generate(e.getCenter(u),e.color),n=t.segments,i=t.buildings;n.forEach(function(e){return a.drawSegment(u.context,e)}),i.forEach(function(e){return a.drawBuilding(u.context,e)})}})})}
},{"./classes/Point.js":"hpvp","./classes/Circle.js":"J7hg","./classes/Polygon.js":"7N8v","./generation.js":"s9Z0","./draw.js":"3JeV"}],"H99C":[function(require,module,exports) {
"use strict";var e=o(require("./classes/Point.js")),t=i(require("./interaction.js")),r=i(require("./generation.js")),n=i(require("./draw.js"));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}var s=document.getElementById("canvas"),u=s.getContext("2d");s.width=.85*window.innerWidth,s.height=window.innerHeight,t.init(s,u);
},{"./classes/Point.js":"hpvp","./interaction.js":"VIuS","./generation.js":"s9Z0","./draw.js":"3JeV"}]},{},["H99C"], null)
//# sourceMappingURL=/ville/src.8ab56b85.map